YUI.add("gallery-taglist",function(a){var j=a.ClassNameManager.getClassName,y=a.Node.create,h="taglist",n=",",u=8,g=13,l=188,i=32,c="taglistentry",k=j("helper","clearfix"),m=j("icon"),v=j("icon","close"),d=j("icon","edit"),q=j(c,"holder"),o=j(c,"close"),w=j(c,"edit"),t=j(c,"text"),b=j(c,"item"),s=j(h,"input","container"),f='<span class="'+[m,v,o].join(" ")+'">Remove</span>',r='<span class="'+[m,d,w].join(" ")+'">Edit</span>',p='<span class="'+t+'"></span>',e='<ul class="'+[k,q].join(" ")+'"></ul>',x='<li class="'+s+'"></li>';a[h]=a.Base.create(h,a.Plugin.Base,[],{oldInput:null,inputContainer:y(x),input:y("<input></input>"),cont:y(e),lis:[],entries:[],toString:function(){return"[Object "+h+"]";},initializer:function(){this.oldInput=this.get("host");this.entries=[];this.lis=[];this._selected=-1;this.renderUI();this.bindUI();this.syncUI();},destructor:function(){this.oldInput.set("type","text");this.input.remove();},renderUI:function(){this.inputContainer.appendChild(this.input);this.cont.append(this.inputContainer);this.oldInput.set("type","hidden");this.input.set("value",this.oldInput.get("value"));this.oldInput.get("parentNode").appendChild(this.cont);},bindUI:function(){this.cont.delegate("click",this.removeClick,"span."+o,this);this.cont.delegate("click",this.editClick,"span."+w,this);this.input.on("blur",this.add,this);this.cont.on("click",function(){this.input.focus();},this);a.on("key",this.keyDown,this.input,"down:"+[g,u,l,i].join(","),this);},syncUI:function(){this.add();},_add:function(B){var C=(this.entries.length)?this.oldInput.get("value")+n+B:B,A=y('<li class="'+b+'"></li>'),z=y(p);A.appendChild(z.set("innerHTML",B));A.appendChild(y(r));A.appendChild(y(f));this.oldInput.set("value",C);this.cont.insert(A,this.inputContainer,"before");this.entries.push(B);this.lis.push(A);},add:function(){var B=this.input.get("value"),A,C,z;B=B.replace(/, /g,",");if(B.length){A=B.split(",");for(z=0,C=A.length;z<C;z+=1){this._add(A[z]);}this.input.set("value","");}},_getIndex:function(A,B){var z,C=A.length;for(z=0;z<C;z+=1){if(A[z]===B){return z;}}return -1;},remove:function(A){var z=this.entries[A],B=(A)?n+z:z;if(z){this.oldInput.set("value",this.oldInput.get("value").replace(B,""));this.lis[A].remove();this.entries.splice(A,1);this.lis.splice(A,1);}this.input.focus();},removeClick:function(B){var A=B.target,z=this._getIndex(this.lis,A.get("parentNode"));if(z>-1){this.remove(z);}},edit:function(A){var z=this.entries[A];if(z){this.remove(A);this.input.set("value",z);}},editClick:function(B){var A=B.target,z=this._getIndex(this.lis,A.get("parentNode"));if(z>-1){this.edit(z);}},keyDown:function(B){var C=B.keyCode,A=this.input.get("value"),z=this.entries.length;if(!A){if(C===g){return;}if(C===i){B.halt();}if(C===u&&z){B.halt();this.edit(z-1);}}if(C===g||C===l){B.halt();if(A){this.add();}}}},{NS:h,ATTRS:{}});},"@VERSION@",{requires:["base-build","plugin","node","classnamemanager","event"]});